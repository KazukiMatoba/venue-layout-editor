version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "=== Environment Info ==="
        - node --version
        - npm --version
        - echo "=== Current directory ==="
        - pwd
        - ls -la
        - echo "=== Installing dependencies in venue-layout-editor ==="
        - cd venue-layout-editor && npm install
        - echo "=== Dependencies installed ==="
    build:
      commands:
        - echo "=== Starting build process ==="
        - echo "=== Running build in venue-layout-editor directory ==="
        - cd venue-layout-editor && npm run lint || true
        - echo "=== Running build command ==="
        - cd venue-layout-editor && CI=false npm run build
        - echo "=== Build completed ==="
        - ls -la venue-layout-editor/dist/
  artifacts:
    baseDirectory: venue-layout-editor/dist
    files:
      - '**/*'
  cache:
    paths:
      - venue-layout-editor/node_modules/**/*
  runtime:
    nodejs:
      version: 18
env:
  variables:
    CI: false
    NODE_ENV: production
    NODE_OPTIONS: "--max-old-space-size=4096"