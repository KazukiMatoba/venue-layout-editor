version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "=== Environment Info ==="
        - node --version
        - npm --version
        - echo "=== Current directory ==="
        - pwd
        - ls -la
        - echo "=== Changing to venue-layout-editor directory ==="
        - cd venue-layout-editor
        - echo "=== Installing dependencies ==="
        - npm install
        - echo "=== Dependencies installed ==="
        - ls -la
    build:
      commands:
        - echo "=== Starting build process ==="
        - cd venue-layout-editor
        - npm run lint || true
        - echo "=== Running build command ==="
        - CI=false npm run build
        - echo "=== Build completed ==="
        - ls -la dist/
  artifacts:
    baseDirectory: venue-layout-editor/dist
    files:
      - '**/*'
  cache:
    paths:
      - venue-layout-editor/node_modules/**/*
  runtime:
    nodejs:
      version: 18
env:
  variables:
    CI: false
    NODE_ENV: production
    NODE_OPTIONS: "--max-old-space-size=4096"